---
title: "log4net Database"
layout: post
---
<P>I was recently introduced to <A href="http://logging.apache.org/log4net/">log4net</A> by Ed Kisinger of <A href="http://www.EdSquared.com">EdSquared.com</A> and absolutely love the project.&nbsp; I've previously used to Logging Application Block inside Enterprise Manager for my logging, and would again if I was using the rest of EntLib, but log4net fills the wonderful point where you may not want to take on all of EntLib and still have excellent logging.</P><P>log4net abstracts the actually logging on messages from the location that a log will be stored.&nbsp; As such it is easy to change from file logging, to UDP network logging to Database logging, all without touching the code which actually logs.&nbsp; Fantastic idea!&nbsp; The Appender model, as they call this, includes many excellent Appenders right out of the box.</P><P>In particular, I wanted to use to AdoNetAppender to log my messages to a database.&nbsp; Easy enough, the simple example included in the AdoNetAppender documentation logs the most basic of information.&nbsp; But as you dig deeper into what information log4net <STRONG>can</STRONG> store, you begin to realize how oversimplified this structure really is.</P><P>It would be a reasonable thing to say that I can sometimes be a bit of a perfectionist.&nbsp; As such I spent this morning creating a database structure capable of holding all of the log4net information, properly normalized to the third normal form.&nbsp; If you would like to be able to store any information available from log4net when logging to a database, then feel free to take this structure and adapt it to your needs.</P><P>The only personalized piece of this database at the moment is the inclusion of a column for storing a property called InstanceId.&nbsp; As I work with BizTalk on a regular basis, and love <A href="http://www.traceofthought.com/">Scott Colestock's BizTalk Deployment Framework</A>, I included a column for the Orchestration instance id which his <A href="http://www.traceofthought.net/misc/BT2006DeployWithNAntSample_3.0.zip">Serializable log4net extension</A> includes.</P><P><A href="http://www.timrayburn.net/content/binary/log4netDatabase.zip">Download Version 1.0 of log4net Database</A></P>
