---
title: "Model View Presenter"
layout: post
---
<P></P><P>I recently had the pleasure of attending a talk (twice) by <A href="http://weblogs.asp.net/ScottCate/">Scott Cate</A> about the Model View Presenter design pattern as implemented in .NET. I had never worked with this design pattern before and must say it was a joy to listen to Scott give this talk. He style is very natural, code oriented, and he stays very connected to the audience. <P>The concept of this pattern is one of seperation of UI from Implementation. Most N-Tier implementations believe they do this well, but in fact still fill their code-behind (for ASP.NET) or form class (for WinForms) with logic which retrieves data, validates, etc. The Model View Presenter (MVP) suggests a different way, in which you do not place this in your application, but rather in a presenter object. But before we go further, let's define some of the terms. <P><STRONG>Model</STRONG> - The model is your business objects, or data access layer, which provides the data which needs to be presented. <P><STRONG>View</STRONG> - The view is an Interface which defines how information is both retrieved and set. <P><STRONG>Presenter</STRONG> - The presenter is a class which requires a "view" object to be constructed and can then present methods which will act upon the view. <P>As a simple example, let's take the concept of a simple blogging software which stores all of the posts in an XML file. The XML file will look like this : <P></P><DIV class=wlWriterSmartContent id=57F11A72-B0E5-49c7-9094-E3A15BD5B5E7:a9acb5be-46a1-4a04-9664-f9a75b5f1980 contentEditable=false style="PADDING-RIGHT: 0px; DISPLAY: inline; PADDING-LEFT: 0px; FLOAT: none; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-TOP: 0px"><PRE style="BACKGROUND-COLOR: white"><DIV><!--Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">Posts</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">Post </SPAN><SPAN style="COLOR: #ff0000">id</SPAN><SPAN style="COLOR: #0000ff">=1&gt;</SPAN><SPAN style="COLOR: #ff0000">&lt;Title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000">Model View Presenter Rocks!</SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">Body</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000">Lots of cool text goes here</SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Body</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Post</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">Post </SPAN><SPAN style="COLOR: #ff0000">id</SPAN><SPAN style="COLOR: #0000ff">=2&gt;</SPAN><SPAN style="COLOR: #ff0000">&lt;Title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000">BizTalk Rocks!</SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">Body</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000">Lots of cool text goes here</SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Body</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Post</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">Post </SPAN><SPAN style="COLOR: #ff0000">id</SPAN><SPAN style="COLOR: #0000ff">=3&gt;</SPAN><SPAN style="COLOR: #ff0000">&lt;Title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000">Dot Net Rocks!</SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Title</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN style="COLOR: #800000">Body</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000">Will this get me in trouble with Cory?</SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Body</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Post</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">&lt;/</SPAN><SPAN style="COLOR: #800000">Posts</SPAN><SPAN style="COLOR: #0000ff">&gt;</SPAN></DIV></PRE></DIV><P></P><P>Given this, which we keep in a "posts.xml" file, we will implement a super simple Model object.</P><P>&nbsp;</P><P></P><DIV class=wlWriterSmartContent id=57F11A72-B0E5-49c7-9094-E3A15BD5B5E7:3a7bcc20-0463-4e73-bb85-0da7e69ac00f contentEditable=false style="PADDING-RIGHT: 0px; DISPLAY: inline; PADDING-LEFT: 0px; FLOAT: none; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-TOP: 0px"><PRE style="BACKGROUND-COLOR: white"><DIV><!--Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">public</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">class</SPAN><SPAN style="COLOR: #000000"> Post{</SPAN><SPAN style="COLOR: #0000ff">private</SPAN><SPAN style="COLOR: #000000"> Post() { }</SPAN><SPAN style="COLOR: #008000">//</SPAN><SPAN style="COLOR: #008000"> Private Constructor</SPAN><SPAN style="COLOR: #008000"></SPAN><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">internal</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">string</SPAN><SPAN style="COLOR: #000000"> _Title;</SPAN><SPAN style="COLOR: #0000ff">public</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">string</SPAN><SPAN style="COLOR: #000000"> Title{</SPAN><SPAN style="COLOR: #0000ff">get</SPAN><SPAN style="COLOR: #000000">{</SPAN><SPAN style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> _Title;}}</SPAN><SPAN style="COLOR: #0000ff">internal</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">string</SPAN><SPAN style="COLOR: #000000"> _Body;</SPAN><SPAN style="COLOR: #0000ff">public</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">string</SPAN><SPAN style="COLOR: #000000"> Body{</SPAN><SPAN style="COLOR: #0000ff">get</SPAN><SPAN style="COLOR: #000000">{</SPAN><SPAN style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> _Body;}}</SPAN><SPAN style="COLOR: #0000ff">public</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">static</SPAN><SPAN style="COLOR: #000000"> Post GetPostById(</SPAN><SPAN style="COLOR: #0000ff">int</SPAN><SPAN style="COLOR: #000000"> id){XmlDocument posts </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">new</SPAN><SPAN style="COLOR: #000000"> XmlDocument();posts.Load(</SPAN><SPAN style="COLOR: #000000">"</SPAN><SPAN style="COLOR: #000000">posts.xml</SPAN><SPAN style="COLOR: #000000">"</SPAN><SPAN style="COLOR: #000000">);</SPAN><SPAN style="COLOR: #0000ff">string</SPAN><SPAN style="COLOR: #000000"> strXpath </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #000000">"</SPAN><SPAN style="COLOR: #000000">/Posts/Post[@id={0}]/{1}</SPAN><SPAN style="COLOR: #000000">"</SPAN><SPAN style="COLOR: #000000">;XmlNode titleNode </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> posts.SelectSingleNode<BR>(String.Format(strXpath,id,</SPAN><SPAN style="COLOR: #000000">"</SPAN><SPAN style="COLOR: #000000">Title</SPAN><SPAN style="COLOR: #000000">"</SPAN><SPAN style="COLOR: #000000">));XmlNode bodyNode </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> posts.SelectSingleNode<BR>(String.Format(strXpath, id, </SPAN><SPAN style="COLOR: #000000">"</SPAN><SPAN style="COLOR: #000000">Body</SPAN><SPAN style="COLOR: #000000">"</SPAN><SPAN style="COLOR: #000000">));Post retPost </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">new</SPAN><SPAN style="COLOR: #000000"> Post();retPost._Title </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> titleNode.InnerText;retPost._Body </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> bodyNode.InnerText;</SPAN><SPAN style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> retPost;}}</SPAN></DIV></PRE></DIV><P></P><P>&nbsp;</P><P>Now that we can get data from the file, we need to create our view. Our view is an Interface which supports "get"ing the post id, and "set"ing the title and body. <P><P></P><DIV class=wlWriterSmartContent id=57F11A72-B0E5-49c7-9094-E3A15BD5B5E7:a93d8e8a-4bde-4b92-b9dd-ec0b57a05b8c contentEditable=false style="PADDING-RIGHT: 0px; DISPLAY: inline; PADDING-LEFT: 0px; FLOAT: none; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-TOP: 0px"><PRE style="BACKGROUND-COLOR: white"><DIV><!--Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">public</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">interface</SPAN><SPAN style="COLOR: #000000"> IPostView{</SPAN><SPAN style="COLOR: #0000ff">int</SPAN><SPAN style="COLOR: #000000"> PostId { </SPAN><SPAN style="COLOR: #0000ff">get</SPAN><SPAN style="COLOR: #000000">; }</SPAN><SPAN style="COLOR: #0000ff">string</SPAN><SPAN style="COLOR: #000000"> Title { </SPAN><SPAN style="COLOR: #0000ff">set</SPAN><SPAN style="COLOR: #000000">; }</SPAN><SPAN style="COLOR: #0000ff">string</SPAN><SPAN style="COLOR: #000000"> Body { </SPAN><SPAN style="COLOR: #0000ff">set</SPAN><SPAN style="COLOR: #000000">; }}</SPAN></DIV></PRE></DIV><P></P><P>Finally, we have our presenter. Our presenter requires an implementation of our interface to be constructed and offers a method which allows retrieval.</P><P>&nbsp;</P><P></P><DIV class=wlWriterSmartContent id=57F11A72-B0E5-49c7-9094-E3A15BD5B5E7:c0398ff1-8463-4c3e-ac51-9358268a687f contentEditable=false style="PADDING-RIGHT: 0px; DISPLAY: inline; PADDING-LEFT: 0px; FLOAT: none; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-TOP: 0px"><PRE style="BACKGROUND-COLOR: white"><DIV><!--Code highlighting produced by Actipro CodeHighlighter (freeware)http://www.CodeHighlighter.com/--><SPAN style="COLOR: #000000"></SPAN><SPAN style="COLOR: #0000ff">public</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">class</SPAN><SPAN style="COLOR: #000000"> PostPresenter{</SPAN><SPAN style="COLOR: #0000ff">private</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">readonly</SPAN><SPAN style="COLOR: #000000"> IPostView view;</SPAN><SPAN style="COLOR: #0000ff">public</SPAN><SPAN style="COLOR: #000000"> PostPresenter(IPostView view){</SPAN><SPAN style="COLOR: #0000ff">this</SPAN><SPAN style="COLOR: #000000">.view </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> view;}</SPAN><SPAN style="COLOR: #0000ff">public</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN style="COLOR: #0000ff">void</SPAN><SPAN style="COLOR: #000000"> RetrievePost(){Post myPost </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> Post.GetPostById(view.PostId);view.Title </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> myPost.Title;view.Body </SPAN><SPAN style="COLOR: #000000">=</SPAN><SPAN style="COLOR: #000000"> myPost.Body;}}</SPAN></DIV></PRE></DIV><P></P><P>If you want to see all of this implemented as a Windows Form application, <A href="http://www.TimRayburn.net/content/binary/MVPExample.zip">then grab the download here.</A></P><P>&nbsp;</P><DIV class=wlWriterSmartContent id=0767317B-992E-4b12-91E0-4F059A8CECA8:e93c0a00-f2d2-44ae-bc4b-2363fb8838d1 contentEditable=false style="PADDING-RIGHT: 0px; DISPLAY: inline; PADDING-LEFT: 0px; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-TOP: 0px">Technorati tags: <A href="http://technorati.com/tags/design%20patterns" rel=tag>design patterns</A>, <A href="http://technorati.com/tags/model%20view%20presenter" rel=tag>model view presenter</A>, <A href="http://technorati.com/tags/C#" rel=tag>C#</A>, <A href="http://technorati.com/tags/scott%20cate" rel=tag>scott cate</A></DIV>
